# Backend

Plone {{ cookiecutter.plone_version }} backend for {{ cookiecutter.title }}.

Python package: `{{ cookiecutter.__python_package }}`

## Setup

```bash
make install    # create venv, install packages, generate config
make run        # start Zope/Plone dev server on http://localhost:8080
```

Default admin credentials: `admin` / `{{ cookiecutter.initial_user_password }}`

## Development

| Command | Description |
|---------|-------------|
| `make install` | Install (venv + packages + config) |
| `make run` | Start development server |
| `make test` | Run pytest |
| `make check` | Run ruff + zpretty checks |
| `make format` | Auto-format code |
| `make clean` | Remove venv and generated files |

## Project Layout

```
backend/
  src/{{ cookiecutter.organization }}/{{ cookiecutter.project_name }}/   Python package source
  tests/                              pytest test suite
  instance.yaml                       Zope instance configuration
  mx.ini                              mxdev configuration
  pyproject.toml                      Python project metadata
  constraints.txt                     Version pins
  requirements.txt                    Top-level requirements
  mxmake-preseed.yaml                 mxmake domain configuration
  include.mk                          Custom Makefile targets
```

## Build System

The `Makefile` is generated by [mxmake](https://github.com/mxstack/mxmake).
It manages the Python virtualenv, package installation, and QA tools.

To regenerate after changing `mxmake-preseed.yaml`:

```bash
mxmake init --preseed mxmake-preseed.yaml
```

Custom targets can be added in `include.mk`.

## Adding Python Dependencies

1. Add the package to `requirements.txt` or `pyproject.toml`
2. Run `make install`

For version pins, update `constraints.txt`.
